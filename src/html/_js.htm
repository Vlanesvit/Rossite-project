<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script>
	const pageTransition01 = document.querySelectorAll('.page-transition_bg-item.is-01');
	const pageTransition02 = document.querySelectorAll('.page-transition_bg-item.is-02');

	function loaderAnimFrom() {
		pageTransition01.forEach(page01 => {
			gsap.to(page01, {
				yPercent: 0,
				delay: 0.2,
				duration: 0.6,
				ease: 'cubic-bezier(0.9, 0, 0.2, 1)',
			});
		});

		pageTransition02.forEach(page02 => {
			gsap.to(page02, {
				yPercent: 0,
				delay: 0.4,
				duration: 0.6,
				ease: 'cubic-bezier(0.9, 0, 0.2, 1)',
			});
		});
	}

	function loaderAnimTo() {
		pageTransition01.forEach(page01 => {
			gsap.to(page01, {
				yPercent: 100,
				delay: 0.4,
				duration: 0.6,
				ease: 'cubic-bezier(0.9, 0, 0.2, 1)',
			});
		});

		pageTransition02.forEach(page02 => {
			gsap.to(page02, {
				yPercent: 100,
				delay: 0.2,
				duration: 0.6,
				ease: 'cubic-bezier(0.9, 0, 0.2, 1)',
			});
		});
	}

	$(document).on('click', 'a', function (e) {
		loaderAnimFrom()

		var $this = $(this);
		var pageTransition = $this.attr("page-transition");

		// Check als de transitie genegeerd moet worden
		if (pageTransition === "ignore") {
			return false;
		}

		// Check voor dezelfde host en afwezigheid van '#'
		if (this.host !== window.location.host || $this.attr("href").indexOf("#") !== -1) {
			loaderAnimTo()
			return true; // Geen interne link, dus geen page transition.
		}

		e.preventDefault();

		var moduleURL = $this.attr("href");
		var transitionTime = 1500; // Gebruik van .data() voor data attributen

		$('[page-transition="component"]').trigger('click'); // Veranderd naar trigger voor consistentie
		$(document).trigger("page-transition");

		// Gebruik van setTimeout om de redirect te vertragen
		setTimeout(function () {
			window.location = moduleURL;
		}, transitionTime);
	});

	// Verwijder oude event handlers om dubbele bindingen te voorkomen
	$(window).off("pageshow").on("pageshow", function (event) {
		if (event.originalEvent.persisted) {
			window.location.reload();
		}
	});
</script>

<script>
	function checkPageTransition() {
		var visited = sessionStorage.getItem("visited") === "true";
		loaderAnimTo()

		if (!visited) {
			$(".page-transition.is-load").hide();
			sessionStorage.setItem("visited", "true");
		} else {
			$(".page-transition.is-preload").hide();
		}
	}

	// Wacht tot het document volledig geladen is voordat je de check uitvoert
	if (document.readyState === 'loading') {

		// Het document is nog aan het laden, wacht op het event
		document.addEventListener('DOMContentLoaded', checkPageTransition);

	} else {
		// `DOMContentLoaded` is al afgevuurd, voer de check direct uit
		checkPageTransition();

	}
</script>

<script src="https://cdn.jsdelivr.net/npm/image-compare-viewer@1.6.2/dist/image-compare-viewer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollToPlugin.min.js"></script>
<script src="js/app.min.js"></script>